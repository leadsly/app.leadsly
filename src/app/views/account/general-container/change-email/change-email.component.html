<div class="change-email-container">
	<div class="change-email-container__change">
		<mat-card class="change-email__card">
			<mat-card-header>
				<div mat-card-avatar class="change-email-container__header-image"></div>
				<mat-card-title>{{ 'odm.account.general.email.change.title' | translate }}</mat-card-title>
			</mat-card-header>
			<mat-card-content>
				<form [formGroup]="changeEmailForm">
					<div class="auth__new-email-field">
						<mat-form-field appearance="standard">
							<mat-label>{{ 'odm.auth.form.label.new-email' | translate }}</mat-label>
							<input matInput formControlName="newEmail" type="text" autocomplete="new-email" required />
							<mat-icon matSuffix>email</mat-icon>
							<mat-error *ngIf="_ifControlFieldIsInvalid(changeEmailForm?.get('newEmail'))">{{
								_getErrorMessage$(changeEmailForm?.get('newEmail')) | async
							}}</mat-error>
						</mat-form-field>
					</div>

					<div class="auth__current-email-field">
						<mat-form-field appearance="standard">
							<mat-label>{{ 'odm.auth.form.label.email' | translate }}</mat-label>
							<input matInput formControlName="email" autocomplete="email" required />
							<mat-icon matSuffix>email</mat-icon>
							<mat-error *ngIf="_ifControlFieldIsInvalid(changeEmailForm?.get('email'))">{{
								_getErrorMessage$(changeEmailForm?.get('email')) | async
							}}</mat-error>
						</mat-form-field>
					</div>

					<div class="auth__password-field">
						<mat-form-field appearance="standard">
							<mat-label>{{ 'odm.auth.form.label.password' | translate }}</mat-label>
							<input matInput formControlName="password" [type]="_currentPasswordHide ? 'password' : 'text'" autocomplete="password" required />
							<mat-icon class="auth__view-password" matSuffix (click)="_currentPasswordHide = !_currentPasswordHide">{{
								_currentPasswordHide ? 'visibility_off' : 'visibility'
							}}</mat-icon>
							<mat-error *ngIf="_ifControlFieldIsInvalid(changeEmailForm?.get('password'))">{{
								_getErrorMessage$(changeEmailForm?.get('password')) | async
							}}</mat-error>
						</mat-form-field>
					</div>
				</form>
			</mat-card-content>
			<mat-card-actions>
				<button
					mat-button
					mat-stroked-button
					color="accent"
					type="button"
					(click)="_onChangeEmail()"
					[disabled]="!changeEmailForm?.valid || emailChangeInProgress"
				>
					{{ 'odm.buttons.change' | translate }}
					<ng-container *ngIf="emailChangeInProgress">
						<odm-spinner
							[type]="'button'"
							[spinnerColor]="'accent'"
							[diameter]="_changingEmailSpinnerDiameter"
							[strokeWidth]="_changingEmailSpinnerStrokeWidth"
						>
						</odm-spinner>
					</ng-container>
				</button>
				<button mat-button type="button" (click)="_cancelClicked()">{{ 'odm.buttons.cancel' | translate }}</button>
			</mat-card-actions>
		</mat-card>
	</div>
</div>
